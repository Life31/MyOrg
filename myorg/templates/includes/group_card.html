{% load thumbnail %}
{% load user_filters %}
{% load static %}
<div class="card" style="width: 300px; margin-right: 20px; border-radius: 10px; box-shadow: 0px 0px 7px rgba(0, 0, 0, 0.25);">
    <!--div class="card-body">
        {% thumbnail group.image "400x400" crop="center" upscale=True as im %}<img class="card-img" src="{{ im.url }}">{% endthumbnail %}
    </div-->
    <div class="card-body">
        <div class="h3">
            {{ group.title }}
        </div>
    </div>
    <ul class="list-group list-group-flush">
		<li class="list-group-item" style="border-radius: 10px; border: 0px;">
            <!--div class="h6 text-black" style="text-align: center; display: flex; flex-direction: column;">
				<a class="btn counts" href="{% url 'group' group.slug %}">Всего заявок: {{ count }}</a>
                <a class="btn counts" href="{% url 'group_posts_states' group.slug 1 %}">Не подтверждено: {{ count_new }}</a>
                <a class="btn counts" href="{% url 'group_posts_states' group.slug 2 %}">Подтверждено: {{ count_in_progr }}</a>
                <a class="btn counts" href="{% url 'group_posts_states' group.slug 3 %}">Завершено: {{ count_finished }}</a>
                <a class="btn counts" href="{% url 'group_posts_states' group.slug 4 %}">Отклонено: {{ count_postponed }}</a>  
            </div-->
            {% with request.resolver_match.view_name as view_name and request.get_full_path|url_to_state_id as state %}
				<div class="h6 text-black" style="text-align: center; display: flex; flex-direction: column;">
					{% if view_name == 'group' %}
						<a class="btn counts" 
						style="background: #1571FF; color: white;" 
						href="{% url 'group' group.slug %}">Всего заявок: {{ count }}</a>
					{% else %}
						<a class="btn counts" 
						href="{% url 'group' group.slug %}">Всего заявок: {{ count }}</a>
					{% endif %}
					{% if state == '1' %}
						<a class="btn counts" 
						style="background: #1571FF; color: white;" 
						href="{% url 'group_posts_states' group.slug 1 %}">Не подтверждено: {{ count_new }}</a>
					{% else %}
						<a class="btn counts" 
						href="{% url 'group_posts_states' group.slug 1 %}">Не подтверждено: {{ count_new }}</a>
					{% endif %}
					{% if state == '2' %}
						<a class="btn counts" 
						style="background: #1571FF; color: white;" 
						href="{% url 'group_posts_states' group.slug 2 %}">Подтверждено: {{ count_in_progr }}</a>
					{% else %}
						<a class="btn counts" 
						href="{% url 'group_posts_states' group.slug 2 %}">Подтверждено: {{ count_in_progr }}</a>
					{% endif %}
					{% if state == '3' %}
						<a class="btn counts" 
						style="background: #1571FF; color: white;" 
						href="{% url 'group_posts_states' group.slug 3 %}">Завершено: {{ count_finished }}</a>
					{% else %}
						<a class="btn counts" 
						href="{% url 'group_posts_states' group.slug 3 %}">Завершено: {{ count_finished }}</a>
					{% endif %}
					{% if state == '4' %}
						<a class="btn counts" 
						style="background: #1571FF; color: white;" 
						href="{% url 'group_posts_states' group.slug 4 %}">Отклонено: {{ count_postponed }}</a>
					{% else %}
						<a class="btn counts" 
						href="{% url 'group_posts_states' group.slug 4 %}">Отклонено: {{ count_postponed }}</a>
					{% endif %}
				</div>
			{% endwith %}
        </li>
    </ul>
</div>
